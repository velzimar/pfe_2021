{% extends 'base.html.twig' %}

{% block title %}New Service{% endblock %}
{% block  breadcrumb %}
    <ul class="breadcrumb">
        <li class="breadcrumb-item">
            <a href="#">Accueil</a>
        <li class="breadcrumb-item">
            <a href="{{ path('myWorkingHours_new') }}">Temps de travail</a>
        </li>
    </ul>
{% endblock %}

{% block QuickLink1 %}


    {% if service.id is defined %}
        <a class="btn btn-white"
           href="{{ path('service_calendar',{'id':service.id}) }}">
            <i class="os-icon os-icon-delivery-box-2"></i>
            <span id="my_span">Je fixe des RDV</span>
        </a>
        <a class="btn btn-white"
           href="{{ path('myWorkingHours_add_exception') }}">
            <i class="os-icon os-icon-delivery-box-2"></i>
            <span id="my_span">Ajouter des exceptions</span>
        </a>
    {% else %}
        <a class="btn btn-white btn-sm" href="{{ path('myServices_new') }}">
            <i class="os-icon os-icon-delivery-box-2"></i>
            <span>Crée un service</span>
        </a>
    {% endif %}
{% endblock %}

{% block body %}
    <style>
        th {
            text-align: center;
        }

        .table td {
            padding: 0;
            vertical-align: top;
            border-top: 1px solid rgba(83, 101, 140, 0.33);
        }

        .form-control {
            padding: 0
        }
        td {
           // display: flex;
            align-items: center;
            align-content: center;
        }
        td div {
            margin: 0 auto;
            text-align: center;
        }
    </style>
    <div class="col-sm-7">
        <div class="element-wrapper">
            <div class="element-box">
                <div class="element-info">
                    <div class="element-info-with-icon">
                        <div class="element-info-icon">
                            <div class="os-icon os-icon-calendar"></div>
                        </div>
                        <div class="element-info-text">
                            <h5 class="element-inner-header" style="color: #047bf8;">
                                Mes horaires
                            </h5>
                            <div class="element-inner-desc">
                            </div>
                        </div>
                    </div>
                </div>
                {% form_theme form 'bootstrap_4_horizontal_layout.html.twig' %}
                {{ form_start(form) }}
                <div class="order-items-table">
                    <div class="table-responsive">
                        <table id="tableSeance" class="table table-responsive-lg">
                            <thead>
                            <tr>
                                <th>
                                    Jours
                                </th>
                                <th colspan="2" style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">
                                    Séance 1
                                </th>
                                <th colspan="2">
                                    Séance 2
                                </th>
                            </tr>
                            <tr>
                                <th>

                                </th>
                                <th>
                                    Début
                                </th>
                                <th style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">
                                    Fin
                                </th>
                                <th>
                                    Début
                                </th>
                                <th>
                                    Fin
                                </th>
                            </tr>
                            </thead>
                            <tbody>

                            <tr>
                                <td>Lundi</td>
                                <td>{{ form_widget(form.monday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.monday_S1_end) }}</td>
                                <td>{{ form_widget(form.monday_S2_start) }}</td>
                                <td>{{ form_widget(form.monday_S2_end) }}</td>
                            </tr>

                            <tr>
                                <td>Mardi</td>
                                <td>{{ form_widget(form.tuesday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.tuesday_S1_end) }}</td>
                                <td>{{ form_widget(form.tuesday_S2_start) }}</td>
                                <td>{{ form_widget(form.tuesday_S2_end) }}</td>
                            </tr>
                            <tr>
                                <td>Mercredi</td>
                                <td>{{ form_widget(form.wednesday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.wednesday_S1_end) }}</td>
                                <td>{{ form_widget(form.wednesday_S2_start) }}</td>
                                <td>{{ form_widget(form.wednesday_S2_end) }}</td>
                            </tr>
                            <tr>
                                <td>Jeudi</td>
                                <td>{{ form_widget(form.thursday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.thursday_S1_end) }}</td>
                                <td>{{ form_widget(form.thursday_S2_start) }}</td>
                                <td>{{ form_widget(form.thursday_S2_end) }}</td>
                            </tr>
                            <tr>
                                <td>Vendredi</td>
                                <td>{{ form_widget(form.friday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.friday_S1_end) }}</td>
                                <td>{{ form_widget(form.friday_S2_start) }}</td>
                                <td>{{ form_widget(form.friday_S2_end) }}</td>
                            </tr>
                            <tr>
                                <td>Samedi</td>
                                <td>{{ form_widget(form.saturday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.saturday_S1_end) }}</td>
                                <td>{{ form_widget(form.saturday_S2_start) }}</td>
                                <td>{{ form_widget(form.saturday_S2_end) }}</td>
                            </tr>
                            <tr>
                                <td>Dimanche</td>
                                <td>{{ form_widget(form.sunday_S1_start) }}</td>
                                <td style="border-right: 1px solid rgba(83, 101, 140, 0.33) ">{{ form_widget(form.sunday_S1_end) }}</td>
                                <td>{{ form_widget(form.sunday_S2_start) }}</td>
                                <td>{{ form_widget(form.sunday_S2_end) }}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                {#
                <div class="row">
                    <div class="col-sm-12">
                            {{ form_widget(form.isActive) }}
                    </div>
                </div>
                #}

                <div class="form-buttons-w">
                    <div class="row">
                        <div class="col-auto mr-auto">
                            {# <input type="button" name="btn" value="Submit" id="submitBtn" data-toggle="modal" data-target="#confirm-submit" class="btn btn-default" /> #}

                            <button type="button" name="btn" value="Submit" id="submitBtn" class="btn btn-primary">Enregistrer</button>

                        </div>
                        <div class="col-auto">
                            <button class="btn btn-outline-primary" type="reset">Annuler</button>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="confirm-submit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modal_title"></h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <div class="form-desc">
                                </div>
                            </div>
                            <div class="modal-header">
                                <h6 class="modal-title" style="color: #047bf8">Liste des réservations qui seront affècter par ce changement</h6>
                            </div>
                            <div class="modal-body">
                                <table id="dataTable">
                                    <thead>
                                    <tr>
                                        <th>Client</th>
                                        <th>Reservation</th>
                                        <th>Status</th>
                                        <th>Téléphone</th>
                                        <th>Date</th>
                                    </tr>
                                    </thead>
                                    <tbody id="tbody_for_after">
                                    </tbody>
                                </table>

                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <button class="btn btn-warning " type="submit" id="#formField">Envoyer des emails d'annulation et appliquer les changements</button>
                                </div>
                                <div class="row">
                                    <div class="col-auto">
                                        <button type="button" class="btn btn-outline-dark" >Télécharger cette liste</button></div>
                                    <div class="col-auto mr-auto">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal">Annuler</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="confirm-submit-empty" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="modal_title"></h5>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <div class="form-desc">
                                </div>
                            </div>
                            <div class="modal-header">
                                <h6 class="modal-title" style="color: #047bf8">Êtes-vous sûr de vouloir enregistrer ces données?</h6>
                            </div>
                            <div class="modal-footer">
                                <div class="row">
                                    <button class="btn btn-warning " type="submit" id="#formField">Appliquer les changements</button>
                                </div>
                                <div class="row">
                                    <div class="col-auto mr-auto">
                                        <button type="button" class="btn btn-primary" data-dismiss="modal">Annuler</button></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {#
                <div class="modal fade" id="confirm-submit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                Confirm Submit
                            </div>
                            <div class="modal-body">
                                Are you sure you want to submit the following details?

                                <!-- We display the details entered by the user here -->
                                <table class="table">
                                    <tr>
                                        <th>Last Name</th>
                                        <td id="lname"></td>
                                    </tr>
                                    <tr>
                                        <th>First Name</th>
                                        <td id="fname"></td>
                                    </tr>
                                </table>

                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                                <button class="btn btn-primary " type="submit" id="#formField">Enregistrer</button>
                            </div>
                        </div>
                    </div>
                </div> #}
                {{ form_end(form) }}

            </div>
        </div>
    </div>

{% endblock %}
{% block javascripts %}

    <script>/*
        $('#submitBtn').on('click', function () {
            console.log("az")
            console.log($('#submitBtn').attr("type"))
            if($('#submitBtn').attr("type")==="submit"){

                $(this).closest("form").submit();
                $('#submitBtn').submit()
            }
        });*/
        $("[role='presentation']").addClass("table table-borderless")
        $("[role='presentation']").children("thead").remove()
        //$('select').addClass("form-control")
        $("td div.form-inline div.col-auto:first-child").after(":")


        /*
        $("#working_hours_monday_S1_start_minutes").change(function () {

        })

        $("#working_hours_monday_S1_end_hours").change(function () {

        })
        $("#working_hours_monday_S1_end_minutes").change(function () {

        })
*/

        var regex = /^((?!(^0$|^15$|^30$|^45$|\x00)).)*$/;
        // Narrow down elements by using attribute starts with and ends with selector
        $("select[id$='_minutes'] option").filter(function() {
            // filter the elements that passes the regex pattern
            b = regex.test($(this).attr('value'));
            if($(this).attr('value') !== "" && b) $(this).remove()
        })
        function padWithZero(time){
            t = time.toString()
            if(t.toString().length===1){
                t = "0"+t
            }
            return t
        }

        function formatToTime(s1Hour,s1Min,s2Hour,s2Min){
            if(s1Hour !== "" && s1Min !== "" && s2Hour !== "" && s2Min !== "" ){
                time = padWithZero(s1Hour)+":"+padWithZero(s1Min)+"-"+padWithZero(s2Hour)+":"+padWithZero(s2Min)
                console.log(time)
                return time
            }else{
                return null
            }
        }
        
        
        $("#submitBtn").on("click",function () {
            console.log('make json to send')
            //console.log($("select[id='working_hours_monday_S1_start_hours'] option:selected").val())
            working_hours_monday_S1_start_hours = $("select[id='working_hours_monday_S1_start_hours'] option:selected").val()
            working_hours_monday_S1_end_hours = $("select[id='working_hours_monday_S1_end_hours'] option:selected").val()
            working_hours_monday_S2_start_hours = $("select[id='working_hours_monday_S2_start_hours'] option:selected").val()
            working_hours_monday_S2_end_hours = $("select[id='working_hours_monday_S2_end_hours'] option:selected").val()

            working_hours_tuesday_S1_start_hours = $("select[id='working_hours_tuesday_S1_start_hours'] option:selected").val()
            working_hours_tuesday_S1_end_hours = $("select[id='working_hours_tuesday_S1_end_hours'] option:selected").val()
            working_hours_tuesday_S2_start_hours = $("select[id='working_hours_tuesday_S2_start_hours'] option:selected").val()
            working_hours_tuesday_S2_end_hours = $("select[id='working_hours_tuesday_S2_end_hours'] option:selected").val()

            working_hours_wednesday_S1_start_hours = $("select[id='working_hours_wednesday_S1_start_hours'] option:selected").val()
            working_hours_wednesday_S1_end_hours = $("select[id='working_hours_wednesday_S1_end_hours'] option:selected").val()
            working_hours_wednesday_S2_start_hours = $("select[id='working_hours_wednesday_S2_start_hours'] option:selected").val()
            working_hours_wednesday_S2_end_hours = $("select[id='working_hours_wednesday_S2_end_hours'] option:selected").val()

            working_hours_thursday_S1_start_hours = $("select[id='working_hours_thursday_S1_start_hours'] option:selected").val()
            working_hours_thursday_S1_end_hours = $("select[id='working_hours_thursday_S1_end_hours'] option:selected").val()
            working_hours_thursday_S2_start_hours = $("select[id='working_hours_thursday_S2_start_hours'] option:selected").val()
            working_hours_thursday_S2_end_hours = $("select[id='working_hours_thursday_S2_end_hours'] option:selected").val()

            working_hours_friday_S1_start_hours = $("select[id='working_hours_friday_S1_start_hours'] option:selected").val()
            working_hours_friday_S1_end_hours = $("select[id='working_hours_friday_S1_end_hours'] option:selected").val()
            working_hours_friday_S2_start_hours = $("select[id='working_hours_friday_S2_start_hours'] option:selected").val()
            working_hours_friday_S2_end_hours = $("select[id='working_hours_friday_S2_end_hours'] option:selected").val()

            working_hours_saturday_S1_start_hours = $("select[id='working_hours_saturday_S1_start_hours'] option:selected").val()
            working_hours_saturday_S1_end_hours = $("select[id='working_hours_saturday_S1_end_hours'] option:selected").val()
            working_hours_saturday_S2_start_hours = $("select[id='working_hours_saturday_S2_start_hours'] option:selected").val()
            working_hours_saturday_S2_end_hours = $("select[id='working_hours_saturday_S2_end_hours'] option:selected").val()

            working_hours_sunday_S1_start_hours = $("select[id='working_hours_sunday_S1_start_hours'] option:selected").val()
            working_hours_sunday_S1_end_hours = $("select[id='working_hours_sunday_S1_end_hours'] option:selected").val()
            working_hours_sunday_S2_start_hours = $("select[id='working_hours_sunday_S2_start_hours'] option:selected").val()
            working_hours_sunday_S2_end_hours = $("select[id='working_hours_sunday_S2_end_hours'] option:selected").val()



            //minutes

            working_hours_monday_S1_start_minutes = $("select[id='working_hours_monday_S1_start_minutes'] option:selected").val()
            working_hours_monday_S1_end_minutes = $("select[id='working_hours_monday_S1_end_minutes'] option:selected").val()
            working_hours_monday_S2_start_minutes = $("select[id='working_hours_monday_S2_start_minutes'] option:selected").val()
            working_hours_monday_S2_end_minutes = $("select[id='working_hours_monday_S2_end_minutes'] option:selected").val()

            working_hours_tuesday_S1_start_minutes = $("select[id='working_hours_tuesday_S1_start_minutes'] option:selected").val()
            working_hours_tuesday_S1_end_minutes = $("select[id='working_hours_tuesday_S1_end_minutes'] option:selected").val()
            working_hours_tuesday_S2_start_minutes = $("select[id='working_hours_tuesday_S2_start_minutes'] option:selected").val()
            working_hours_tuesday_S2_end_minutes = $("select[id='working_hours_tuesday_S2_end_minutes'] option:selected").val()

            working_hours_wednesday_S1_start_minutes = $("select[id='working_hours_wednesday_S1_start_minutes'] option:selected").val()
            working_hours_wednesday_S1_end_minutes = $("select[id='working_hours_wednesday_S1_end_minutes'] option:selected").val()
            working_hours_wednesday_S2_start_minutes = $("select[id='working_hours_wednesday_S2_start_minutes'] option:selected").val()
            working_hours_wednesday_S2_end_minutes = $("select[id='working_hours_wednesday_S2_end_minutes'] option:selected").val()

            working_hours_thursday_S1_start_minutes = $("select[id='working_hours_thursday_S1_start_minutes'] option:selected").val()
            working_hours_thursday_S1_end_minutes = $("select[id='working_hours_thursday_S1_end_minutes'] option:selected").val()
            working_hours_thursday_S2_start_minutes = $("select[id='working_hours_thursday_S2_start_minutes'] option:selected").val()
            working_hours_thursday_S2_end_minutes = $("select[id='working_hours_thursday_S2_end_minutes'] option:selected").val()

            working_hours_friday_S1_start_minutes = $("select[id='working_hours_friday_S1_start_minutes'] option:selected").val()
            working_hours_friday_S1_end_minutes = $("select[id='working_hours_friday_S1_end_minutes'] option:selected").val()
            working_hours_friday_S2_start_minutes = $("select[id='working_hours_friday_S2_start_minutes'] option:selected").val()
            working_hours_friday_S2_end_minutes = $("select[id='working_hours_friday_S2_end_minutes'] option:selected").val()

            working_hours_saturday_S1_start_minutes = $("select[id='working_hours_saturday_S1_start_minutes'] option:selected").val()
            working_hours_saturday_S1_end_minutes = $("select[id='working_hours_saturday_S1_end_minutes'] option:selected").val()
            working_hours_saturday_S2_start_minutes = $("select[id='working_hours_saturday_S2_start_minutes'] option:selected").val()
            working_hours_saturday_S2_end_minutes = $("select[id='working_hours_saturday_S2_end_minutes'] option:selected").val()

            working_hours_sunday_S1_start_minutes = $("select[id='working_hours_sunday_S1_start_minutes'] option:selected").val()
            working_hours_sunday_S1_end_minutes = $("select[id='working_hours_sunday_S1_end_minutes'] option:selected").val()
            working_hours_sunday_S2_start_minutes = $("select[id='working_hours_sunday_S2_start_minutes'] option:selected").val()
            working_hours_sunday_S2_end_minutes = $("select[id='working_hours_sunday_S2_end_minutes'] option:selected").val()


            monday_s1 = formatToTime(working_hours_monday_S1_start_hours,working_hours_monday_S1_start_minutes,working_hours_monday_S1_end_hours,working_hours_monday_S1_end_minutes)
            tuesday_s1 = formatToTime(working_hours_tuesday_S1_start_hours,working_hours_tuesday_S1_start_minutes,working_hours_tuesday_S1_end_hours,working_hours_tuesday_S1_end_minutes)
            wednesday_s1 = formatToTime(working_hours_wednesday_S1_start_hours,working_hours_wednesday_S1_start_minutes,working_hours_wednesday_S1_end_hours,working_hours_wednesday_S1_end_minutes)
            thursday_s1 = formatToTime(working_hours_thursday_S1_start_hours,working_hours_thursday_S1_start_minutes,working_hours_thursday_S1_end_hours,working_hours_thursday_S1_end_minutes)
            friday_s1 = formatToTime(working_hours_friday_S1_start_hours,working_hours_friday_S1_start_minutes,working_hours_friday_S1_end_hours,working_hours_friday_S1_end_minutes)
            saturday_s1 = formatToTime(working_hours_saturday_S1_start_hours,working_hours_saturday_S1_start_minutes,working_hours_saturday_S1_end_hours,working_hours_saturday_S1_end_minutes)
            sunday_s1 = formatToTime(working_hours_sunday_S1_start_hours,working_hours_sunday_S1_start_minutes,working_hours_sunday_S1_end_hours,working_hours_sunday_S1_end_minutes)

            monday_s2 = formatToTime(working_hours_monday_S2_start_hours,working_hours_monday_S2_start_minutes,working_hours_monday_S2_end_hours,working_hours_monday_S2_end_minutes)
            tuesday_s2 = formatToTime(working_hours_tuesday_S2_start_hours,working_hours_tuesday_S2_start_minutes,working_hours_tuesday_S2_end_hours,working_hours_tuesday_S2_end_minutes)
            wednesday_s2 = formatToTime(working_hours_wednesday_S2_start_hours,working_hours_wednesday_S2_start_minutes,working_hours_wednesday_S2_end_hours,working_hours_wednesday_S2_end_minutes)
            thursday_s2 = formatToTime(working_hours_thursday_S2_start_hours,working_hours_thursday_S2_start_minutes,working_hours_thursday_S2_end_hours,working_hours_thursday_S2_end_minutes)
            friday_s2 = formatToTime(working_hours_friday_S2_start_hours,working_hours_friday_S2_start_minutes,working_hours_friday_S2_end_hours,working_hours_friday_S2_end_minutes)
            saturday_s2 = formatToTime(working_hours_saturday_S2_start_hours,working_hours_saturday_S2_start_minutes,working_hours_saturday_S2_end_hours,working_hours_saturday_S2_end_minutes)
            sunday_s2 = formatToTime(working_hours_sunday_S2_start_hours,working_hours_sunday_S2_start_minutes,working_hours_sunday_S2_end_hours,working_hours_sunday_S2_end_minutes)

            let monday = (monday_s1!==null && monday_s2 !== null)?[monday_s1, monday_s2]:[]
            let tuesday = (tuesday_s1!==null && tuesday_s2 !== null)?[tuesday_s1, tuesday_s2]:[]
            let wednesday = (wednesday_s1!==null && wednesday_s2 !== null)?[wednesday_s1, wednesday_s2]:[]
            let thursday = (thursday_s1!==null && thursday_s2 !== null)?[thursday_s1, thursday_s2]:[]
            let friday = (friday_s1!==null && friday_s2 !== null)?[friday_s1, friday_s2]:[]
            let saturday = (saturday_s1!==null && saturday_s2 !== null)?[saturday_s1, saturday_s2]:[]
            let sunday = (sunday_s1!==null && sunday_s2 !== null)?[sunday_s1, sunday_s2]:[]
            
            let table = {'monday' :monday , 'tuesday':tuesday, 'wednesday' :wednesday , 'thursday': thursday, 'friday' :friday , 'saturday' :saturday , 'sunday' :sunday };
            console.log(table)
            console.log(JSON.stringify(table))


            console.log("entered")
            $.when( listToBeCancelled(table)).done(function(response){

                if(response.result.length === 0){
                    $('#confirm-submit-empty').modal('show')
                    //location.reload(true);
                }else if(response.result.length !== 0){
                    let str = ""
                    Object.keys(response.result).forEach((reservation)=>{
                            console.log(reservation["client"]);
                            console.log(reservation);
                            let client = response.result[reservation]["client"]
                            let id = response.result[reservation]["id"]
                            let status = response.result[reservation]["status"]
                            let phone = response.result[reservation]["phone"]
                            let date = response.result[reservation]["date"].date.substr(0,16)
                        console.log(response.result[reservation]["date"].toString())
                        console.log(response.result[reservation]["date"])
                        console.log(response.result[reservation]["date"]["date"])
                        console.log(response.result[reservation]["date"].date.substr(0,16))
                            str += "<tr><td>" + client + "</td><td>" + id + "</td><td>" + status + "</td><td>" + phone + "</td><td>" + date + "</td></tr>"

                        }
                    )
                    $("#tbody_for_after").html(
                        str
                    )
                    var weekday = ["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];
/*
                    $("#modal_title").html(
                        "Créneau horaire à supprimer: "+weekday[arg.event.start.getDay()]+" à " + start_.substr(11,8)
                    )
                    */

                    if (str === "") {
                        console.log("Aucun produit dans cette catégorie")
                        return;
                    }
                    table = $('#dataTable').DataTable({
                        orderCellsTop: true,
                        fixedHeader: true,
                        "dom": '<"top"l>rt<"bottom"ip><"clear">',
                        language: {
                            url: '//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json'
                        }
                    });

                    $('#confirm-submit').modal('show')

                }else{
                    //error
                }
            });
        })
        function listToBeCancelled(table){
            return $.ajax({
                type: "POST",
                // async: false,
                url: "/workingHours/myWorkingHours/listToBeCancelled",
                data: {
                    data: table,
                },//jQ will sort this out for you
                success: function (response) {
                    //alert(JSON.stringify(response));
                },
            });
        }



    </script>
{% endblock %}