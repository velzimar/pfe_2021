{% extends 'template.html.twig' %}

{% block title %}Register{% endblock %}

{% block stylesheets %}

    <style>
        /* Always set the map height explicitly to define the size of the div
           * element that contains the map. */
        #map {
            height: 400px; /* The height is 400 pixels */
            width: 100%; /* The width is the width of the web page */
        }

    </style>
{% endblock %}
{% block body %}

    <div id="App">
        <div class="auth-wrapper">
            <div class="all-wrapper menu-side with-pattern">
                <div class="auth-box-w">
                    <div class="logo-w">
                        <a href=""><img alt="" style="width: 50%; height:50%" src="{{ asset('img/looper.png') }}"></a>
                    </div>
                    <h4 class="auth-header">
                        S'inscrire
                    </h4>

                    {{ form_start(registrationForm) }}
                    <div class="form-group">
                        {% for flashError in app.flashes('register') %}
                            <div class="alert alert-danger" role="alert">{{ flashError }}</div>
                        {% endfor %}
                    </div>
                    <div class="form-group">
                        {{ form_row(registrationForm.email,{
                            'label':"Adresse Email",
                            'attr': {'class': 'form-control' ,'placeholder':"Entrer l'addresse email" ,'required':"required", 'type':"email" }
                        }) }}
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.nom,{
                                    'label':"Nom",
                                    'attr': {'class': 'form-control' ,'placeholder':"Entrer le nom" ,'required':"required", 'type':"text" }
                                }) }}

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.prenom,{
                                    'label':"Prenom",
                                    'attr': {'class': 'form-control' ,'placeholder':"Entrer le prenom" ,'required':"required", 'type':"text" }
                                }) }}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.cin,{
                                    'label':"Carte d'identité",
                                    'attr': {'class': 'form-control' ,'placeholder':"Entrer le nom" ,'required':"required", 'type':"text" }
                                }) }}

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.phone,{
                                    'label':"Téléphone",
                                    'attr': {'class': 'form-control' ,'placeholder':"Entrer le prenom" ,'required':"required", 'type':"text" }
                                }) }}
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-sm-12">
                            <div class="form-group">
                                {{ form_label(registrationForm.imageFile,null,{
                                    'label':'Image',
                                    'label_attr': {'class': 'custom-file-label','for':'registration_form_imageFile_file'}
                                }) }}
                                {{ form_widget(registrationForm.imageFile) }}

                                <script>
                                    $("#registration_form_imageFile_file").addClass("custom-file-input")
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.plainPassword,{
                                    'label':"Mot de passe",
                                    'attr': {'class': 'form-control' ,'placeholder':"Mot de passe" , 'type':"password" }}
                                ) }}
                                <input type="hidden" name="_csrf_token"
                                       value="{{ csrf_token('authenticate') }}"
                                >
                                <div class="help-block form-text text-muted form-control-feedback">
                                    Minimum of 6 characters
                                </div>

                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                {{ form_row(registrationForm.confirm,{
                                    'label':"Confirmer",
                                    'attr': {'class': 'form-control' ,'placeholder':"Confirmer" , 'type':"password" }}
                                ) }}
                            </div>
                        </div>
                    </div>
                    <fieldset class="form-group">
                        <legend><span>Votre Affaire</span></legend>
                        <div class="form-group">
                            {{ form_row(registrationForm.businessName,{
                                'label':"Nom",
                                'attr': {'class': 'form-control' ,'placeholder':"Entrer le nom" ,'required':"required", 'type':"text" }
                            }) }}
                        </div>
                        <div class="form-group">
                            {{ form_row(registrationForm.businessDescription,{
                                'label':"Description",
                                'attr': {'class': 'form-control' ,'placeholder':"Entrer le prenom" ,'required':"required", 'type':"text" }
                            }) }}
                        </div>
                        <div class="form-group">
                            {{ form_row(registrationForm.category_id,{
                                'label':"Catégorie",
                                'attr': {'class': 'form-control' }
                            }) }}
                        </div>
                    </fieldset>
                    <fieldset class="form-group">
                        <legend><span>Géolocalisation</span></legend>
                        <div class="modal fade" id="myModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Modal Header</h4>
                                    </div>
                                    <div class="modal-body">

                                        <div id="map"></div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12 " align="center">
                                <div class="form-group">
                                    <div type="button" class="os-icon os-icon-map-pin" data-toggle="modal"
                                         data-target="#myModal">
                                        Ouvrir le map
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <input type="text" id="loc" readonly="readonly" class="form-control" value="">
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">Longitude:
                                    <input type="text" id="lng" readonly="readonly" class="form-control" value="">

                                </div>
                                <div class="form-group" hidden>Longitude:
                                    {{ form_row(registrationForm.longitude,{
                                        'label':"longitude",
                                        'attr': {'class': 'form-control'}
                                    }) }}
                                </div>
                            </div>
                            <div class="col-sm-12">
                                <div class="form-group">Latitude:
                                    <input type="text" id="lat" readonly="readonly" class="form-control" value="">
                                </div>
                                <div class="form-group" hidden>
                                    {{ form_row(registrationForm.latitude,{
                                        'label':"latitude",
                                        'attr': {'class': 'form-control'}
                                    }) }}
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <div class="form-buttons-w">
                        <button class="btn btn-primary disabled" type="submit"> Enregistrer</button>
                        <button class="btn" type="reset">Annuler</button>
                    </div>
                    {{ form_end(registrationForm) }}

                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    <script  src="{{ asset('/myScripts/user/register.js') }}"></script>
    <script async
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBGbVdDprMqKm8-WHOBC8u3GIXrBWbJxw&callback=initMap">
    </script>
{% endblock %}